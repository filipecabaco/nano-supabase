var v=class r{static __wrap(e){e=e>>>0;let t=Object.create(r.prototype);return t.__wbg_ptr=e,H.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,H.unregister(this),e}free(){let e=this.__destroy_into_raw();s.__wbg_wasmqueryresult_free(e,0)}get params(){let e=s.wasmqueryresult_params(this.__wbg_ptr);return p(e)}get query(){let e,t;try{let o=s.__wbindgen_add_to_stack_pointer(-16);s.wasmqueryresult_query(o,this.__wbg_ptr);var n=l().getInt32(o+4*0,!0),i=l().getInt32(o+4*1,!0);return e=n,t=i,P(n,i)}finally{s.__wbindgen_add_to_stack_pointer(16),s.__wbindgen_export4(e,t,1)}}get tables(){let e=s.wasmqueryresult_tables(this.__wbg_ptr);return p(e)}toJSON(){let e=s.wasmqueryresult_toJSON(this.__wbg_ptr);return p(e)}};Symbol.dispose&&(v.prototype[Symbol.dispose]=v.prototype.free);function V(r){try{let i=s.__wbindgen_add_to_stack_pointer(-16);s.buildFilterClause(i,a(r));var e=l().getInt32(i+4*0,!0),t=l().getInt32(i+4*1,!0),n=l().getInt32(i+4*2,!0);if(n)throw p(t);return p(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}function W(r){let e=s.initSchemaFromDb(a(r));return p(e)}function X(r,e,t){try{let f=s.__wbindgen_add_to_stack_pointer(-16),w=g(r,s.__wbindgen_export,s.__wbindgen_export2),y=d,h=g(e,s.__wbindgen_export,s.__wbindgen_export2),m=d;var n=b(t)?0:g(t,s.__wbindgen_export,s.__wbindgen_export2),i=d;s.parseDelete(f,w,y,h,m,n,i);var o=l().getInt32(f+4*0,!0),_=l().getInt32(f+4*1,!0),c=l().getInt32(f+4*2,!0);if(c)throw p(_);return v.__wrap(o)}finally{s.__wbindgen_add_to_stack_pointer(16)}}function Y(r,e,t,n){try{let h=s.__wbindgen_add_to_stack_pointer(-16),m=g(r,s.__wbindgen_export,s.__wbindgen_export2),x=d,k=g(e,s.__wbindgen_export,s.__wbindgen_export2),S=d;var i=b(t)?0:g(t,s.__wbindgen_export,s.__wbindgen_export2),o=d,_=b(n)?0:g(n,s.__wbindgen_export,s.__wbindgen_export2),c=d;s.parseInsert(h,m,x,k,S,i,o,_,c);var f=l().getInt32(h+4*0,!0),w=l().getInt32(h+4*1,!0),y=l().getInt32(h+4*2,!0);if(y)throw p(w);return v.__wrap(f)}finally{s.__wbindgen_add_to_stack_pointer(16)}}function K(r){try{let i=s.__wbindgen_add_to_stack_pointer(-16),o=g(r,s.__wbindgen_export,s.__wbindgen_export2),_=d;s.parseOnly(i,o,_);var e=l().getInt32(i+4*0,!0),t=l().getInt32(i+4*1,!0),n=l().getInt32(i+4*2,!0);if(n)throw p(t);return p(e)}finally{s.__wbindgen_add_to_stack_pointer(16)}}function E(r,e,t,n,i){try{let m=s.__wbindgen_add_to_stack_pointer(-16),x=g(r,s.__wbindgen_export,s.__wbindgen_export2),k=d,S=g(e,s.__wbindgen_export,s.__wbindgen_export2),ne=d,re=g(t,s.__wbindgen_export,s.__wbindgen_export2),ie=d;var o=b(n)?0:g(n,s.__wbindgen_export,s.__wbindgen_export2),_=d,c=b(i)?0:g(i,s.__wbindgen_export,s.__wbindgen_export2),f=d;s.parseRequest(m,x,k,S,ne,re,ie,o,_,c,f);var w=l().getInt32(m+4*0,!0),y=l().getInt32(m+4*1,!0),h=l().getInt32(m+4*2,!0);if(h)throw p(y);return v.__wrap(w)}finally{s.__wbindgen_add_to_stack_pointer(16)}}function Z(r,e,t,n){try{let x=s.__wbindgen_add_to_stack_pointer(-16),k=g(r,s.__wbindgen_export,s.__wbindgen_export2),S=d;var i=b(e)?0:g(e,s.__wbindgen_export,s.__wbindgen_export2),o=d,_=b(t)?0:g(t,s.__wbindgen_export,s.__wbindgen_export2),c=d,f=b(n)?0:g(n,s.__wbindgen_export,s.__wbindgen_export2),w=d;s.parseRpc(x,k,S,i,o,_,c,f,w);var y=l().getInt32(x+4*0,!0),h=l().getInt32(x+4*1,!0),m=l().getInt32(x+4*2,!0);if(m)throw p(h);return v.__wrap(y)}finally{s.__wbindgen_add_to_stack_pointer(16)}}function ee(r,e,t,n){try{let w=s.__wbindgen_add_to_stack_pointer(-16),y=g(r,s.__wbindgen_export,s.__wbindgen_export2),h=d,m=g(e,s.__wbindgen_export,s.__wbindgen_export2),x=d,k=g(t,s.__wbindgen_export,s.__wbindgen_export2),S=d;var i=b(n)?0:g(n,s.__wbindgen_export,s.__wbindgen_export2),o=d;s.parseUpdate(w,y,h,m,x,k,S,i,o);var _=l().getInt32(w+4*0,!0),c=l().getInt32(w+4*1,!0),f=l().getInt32(w+4*2,!0);if(f)throw p(c);return v.__wrap(_)}finally{s.__wbindgen_add_to_stack_pointer(16)}}function se(){return{__proto__:null,"./postgrest_parser_bg.js":{__proto__:null,__wbg_Error_8c4e43fe74559d73:function(e,t){let n=Error(P(e,t));return a(n)},__wbg_Number_04624de7d0e8332d:function(e){return Number(u(e))},__wbg_String_8f0eb39a4a4c2f66:function(e,t){let n=String(u(t)),i=g(n,s.__wbindgen_export,s.__wbindgen_export2),o=d;l().setInt32(e+4,o,!0),l().setInt32(e+0,i,!0)},__wbg___wbindgen_bigint_get_as_i64_8fcf4ce7f1ca72a2:function(e,t){let n=u(t),i=typeof n=="bigint"?n:void 0;l().setBigInt64(e+8,b(i)?BigInt(0):i,!0),l().setInt32(e+0,!b(i),!0)},__wbg___wbindgen_boolean_get_bbbb1c18aa2f5e25:function(e){let t=u(e),n=typeof t=="boolean"?t:void 0;return b(n)?16777215:n?1:0},__wbg___wbindgen_debug_string_0bc8482c6e3508ae:function(e,t){let n=N(u(t)),i=g(n,s.__wbindgen_export,s.__wbindgen_export2),o=d;l().setInt32(e+4,o,!0),l().setInt32(e+0,i,!0)},__wbg___wbindgen_in_47fa6863be6f2f25:function(e,t){return u(e)in u(t)},__wbg___wbindgen_is_bigint_31b12575b56f32fc:function(e){return typeof u(e)=="bigint"},__wbg___wbindgen_is_function_0095a73b8b156f76:function(e){return typeof u(e)=="function"},__wbg___wbindgen_is_object_5ae8e5880f2c1fbd:function(e){let t=u(e);return typeof t=="object"&&t!==null},__wbg___wbindgen_is_string_cd444516edc5b180:function(e){return typeof u(e)=="string"},__wbg___wbindgen_is_undefined_9e4d92534c42d778:function(e){return u(e)===void 0},__wbg___wbindgen_jsval_eq_11888390b0186270:function(e,t){return u(e)===u(t)},__wbg___wbindgen_jsval_loose_eq_9dd77d8cd6671811:function(e,t){return u(e)==u(t)},__wbg___wbindgen_number_get_8ff4255516ccad3e:function(e,t){let n=u(t),i=typeof n=="number"?n:void 0;l().setFloat64(e+8,b(i)?0:i,!0),l().setInt32(e+0,!b(i),!0)},__wbg___wbindgen_string_get_72fb696202c56729:function(e,t){let n=u(t),i=typeof n=="string"?n:void 0;var o=b(i)?0:g(i,s.__wbindgen_export,s.__wbindgen_export2),_=d;l().setInt32(e+4,_,!0),l().setInt32(e+0,o,!0)},__wbg___wbindgen_throw_be289d5034ed271b:function(e,t){throw new Error(P(e,t))},__wbg__wbg_cb_unref_d9b87ff7982e3b21:function(e){u(e)._wbg_cb_unref()},__wbg_call_389efe28435a9388:function(){return j(function(e,t){let n=u(e).call(u(t));return a(n)},arguments)},__wbg_call_4708e0c13bdc8e95:function(){return j(function(e,t,n){let i=u(e).call(u(t),u(n));return a(i)},arguments)},__wbg_done_57b39ecd9addfe81:function(e){return u(e).done},__wbg_entries_58c7934c745daac7:function(e){let t=Object.entries(u(e));return a(t)},__wbg_error_7534b8e9a36f1ab4:function(e,t){let n,i;try{n=e,i=t,console.error(P(e,t))}finally{s.__wbindgen_export4(n,i,1)}},__wbg_get_9b94d73e6221f75c:function(e,t){let n=u(e)[t>>>0];return a(n)},__wbg_get_b3ed3ad4be2bc8ac:function(){return j(function(e,t){let n=Reflect.get(u(e),u(t));return a(n)},arguments)},__wbg_get_with_ref_key_1dc361bd10053bfe:function(e,t){let n=u(e)[u(t)];return a(n)},__wbg_instanceof_ArrayBuffer_c367199e2fa2aa04:function(e){let t;try{t=u(e)instanceof ArrayBuffer}catch{t=!1}return t},__wbg_instanceof_Map_53af74335dec57f4:function(e){let t;try{t=u(e)instanceof Map}catch{t=!1}return t},__wbg_instanceof_Uint8Array_9b9075935c74707c:function(e){let t;try{t=u(e)instanceof Uint8Array}catch{t=!1}return t},__wbg_isArray_d314bb98fcf08331:function(e){return Array.isArray(u(e))},__wbg_isSafeInteger_bfbc7332a9768d2a:function(e){return Number.isSafeInteger(u(e))},__wbg_iterator_6ff6560ca1568e55:function(){return a(Symbol.iterator)},__wbg_length_32ed9a279acd054c:function(e){return u(e).length},__wbg_length_35a7bace40f36eac:function(e){return u(e).length},__wbg_log_6b5ca2e6124b2808:function(e){console.log(u(e))},__wbg_new_361308b2356cecd0:function(){let e=new Object;return a(e)},__wbg_new_3eb36ae241fe6f44:function(){let e=new Array;return a(e)},__wbg_new_8a6f238a6ece86ea:function(){let e=new Error;return a(e)},__wbg_new_b5d9e2fb389fef91:function(e,t){try{var n={a:e,b:t},i=(_,c)=>{let f=n.a;n.a=0;try{return ue(f,n.b,_,c)}finally{n.a=f}};let o=new Promise(i);return a(o)}finally{n.a=n.b=0}},__wbg_new_dca287b076112a51:function(){return a(new Map)},__wbg_new_dd2b680c8bf6ae29:function(e){let t=new Uint8Array(u(e));return a(t)},__wbg_new_no_args_1c7c842f08d00ebb:function(e,t){let n=new Function(P(e,t));return a(n)},__wbg_next_3482f54c49e8af19:function(){return j(function(e){let t=u(e).next();return a(t)},arguments)},__wbg_next_418f80d8f5303233:function(e){let t=u(e).next;return a(t)},__wbg_prototypesetcall_bdcdcc5842e4d77d:function(e,t,n){Uint8Array.prototype.set.call(ae(e,t),u(n))},__wbg_queueMicrotask_0aa0a927f78f5d98:function(e){let t=u(e).queueMicrotask;return a(t)},__wbg_queueMicrotask_5bb536982f78a56f:function(e){queueMicrotask(u(e))},__wbg_resolve_002c4b7d9d8f6b64:function(e){let t=Promise.resolve(u(e));return a(t)},__wbg_set_1eb0999cf5d27fc8:function(e,t,n){let i=u(e).set(u(t),u(n));return a(i)},__wbg_set_3f1d0b984ed272ed:function(e,t,n){u(e)[p(t)]=p(n)},__wbg_set_f43e577aea94465b:function(e,t,n){u(e)[t>>>0]=p(n)},__wbg_stack_0ed75d68575b0f3c:function(e,t){let n=u(t).stack,i=g(n,s.__wbindgen_export,s.__wbindgen_export2),o=d;l().setInt32(e+4,o,!0),l().setInt32(e+0,i,!0)},__wbg_static_accessor_GLOBAL_12837167ad935116:function(){let e=typeof global>"u"?null:global;return b(e)?0:a(e)},__wbg_static_accessor_GLOBAL_THIS_e628e89ab3b1c95f:function(){let e=typeof globalThis>"u"?null:globalThis;return b(e)?0:a(e)},__wbg_static_accessor_SELF_a621d3dfbb60d0ce:function(){let e=typeof self>"u"?null:self;return b(e)?0:a(e)},__wbg_static_accessor_WINDOW_f8727f0cf888e0bd:function(){let e=typeof window>"u"?null:window;return b(e)?0:a(e)},__wbg_then_0d9fe2c7b1857d32:function(e,t,n){let i=u(e).then(u(t),u(n));return a(i)},__wbg_then_b9e7b3b5f1a9e1b5:function(e,t){let n=u(e).then(u(t));return a(n)},__wbg_value_0546255b415e96c1:function(e){let t=u(e).value;return a(t)},__wbindgen_cast_0000000000000001:function(e,t){let n=ce(e,t,s.__wasm_bindgen_func_elem_366,oe);return a(n)},__wbindgen_cast_0000000000000002:function(e){return a(e)},__wbindgen_cast_0000000000000003:function(e){return a(e)},__wbindgen_cast_0000000000000004:function(e,t){let n=P(e,t);return a(n)},__wbindgen_cast_0000000000000005:function(e){let t=BigInt.asUintN(64,e);return a(t)},__wbindgen_object_clone_ref:function(e){let t=u(e);return a(t)},__wbindgen_object_drop_ref:function(e){p(e)}}}}function oe(r,e,t){s.__wasm_bindgen_func_elem_367(r,e,a(t))}function ue(r,e,t,n){s.__wasm_bindgen_func_elem_442(r,e,a(t),a(n))}var H=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>s.__wbg_wasmqueryresult_free(r>>>0,1));function a(r){O===T.length&&T.push(T.length+1);let e=O;return O=T[e],T[e]=r,e}var z=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>r.dtor(r.a,r.b));function N(r){let e=typeof r;if(e=="number"||e=="boolean"||r==null)return`${r}`;if(e=="string")return`"${r}"`;if(e=="symbol"){let i=r.description;return i==null?"Symbol":`Symbol(${i})`}if(e=="function"){let i=r.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(r)){let i=r.length,o="[";i>0&&(o+=N(r[0]));for(let _=1;_<i;_++)o+=", "+N(r[_]);return o+="]",o}let t=/\[object ([^\]]+)\]/.exec(toString.call(r)),n;if(t&&t.length>1)n=t[1];else return toString.call(r);if(n=="Object")try{return"Object("+JSON.stringify(r)+")"}catch{return"Object"}return r instanceof Error?`${r.name}: ${r.message}
${r.stack}`:n}function _e(r){r<132||(T[r]=O,O=r)}function ae(r,e){return r=r>>>0,$().subarray(r/1,r/1+e)}var R=null;function l(){return(R===null||R.buffer.detached===!0||R.buffer.detached===void 0&&R.buffer!==s.memory.buffer)&&(R=new DataView(s.memory.buffer)),R}function P(r,e){return r=r>>>0,fe(r,e)}var A=null;function $(){return(A===null||A.byteLength===0)&&(A=new Uint8Array(s.memory.buffer)),A}function u(r){return T[r]}function j(r,e){try{return r.apply(this,e)}catch(t){s.__wbindgen_export3(a(t))}}var T=new Array(128).fill(void 0);T.push(void 0,null,!0,!1);var O=T.length;function b(r){return r==null}function ce(r,e,t,n){let i={a:r,b:e,cnt:1,dtor:t},o=(..._)=>{i.cnt++;let c=i.a;i.a=0;try{return n(c,i.b,..._)}finally{i.a=c,o._wbg_cb_unref()}};return o._wbg_cb_unref=()=>{--i.cnt===0&&(i.dtor(i.a,i.b),i.a=0,z.unregister(i))},z.register(o,i,i),o}function g(r,e,t){if(t===void 0){let c=C.encode(r),f=e(c.length,1)>>>0;return $().subarray(f,f+c.length).set(c),d=c.length,f}let n=r.length,i=e(n,1)>>>0,o=$(),_=0;for(;_<n;_++){let c=r.charCodeAt(_);if(c>127)break;o[i+_]=c}if(_!==n){_!==0&&(r=r.slice(_)),i=t(i,n,n=_+r.length*3,1)>>>0;let c=$().subarray(i+_,i+n),f=C.encodeInto(r,c);_+=f.written,i=t(i,n,_,1)>>>0}return d=_,i}function p(r){let e=u(r);return _e(r),e}var D=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});D.decode();var le=2146435072,U=0;function fe(r,e){return U+=e,U>=le&&(D=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),D.decode(),U=e),D.decode($().subarray(r,r+e))}var C=new TextEncoder;"encodeInto"in C||(C.encodeInto=function(r,e){let t=C.encode(r);return e.set(t),{read:r.length,written:t.length}});var d=0,de,s;function ge(r,e){return s=r.exports,de=e,R=null,A=null,s.__wbindgen_start(),s}async function be(r,e){if(typeof Response=="function"&&r instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(r,e)}catch(i){if(r.ok&&t(r.type)&&r.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",i);else throw i}let n=await r.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{let n=await WebAssembly.instantiate(r,e);return n instanceof WebAssembly.Instance?{instance:n,module:r}:n}function t(n){switch(n){case"basic":case"cors":case"default":return!0}return!1}}async function L(r){if(s!==void 0)return s;r!==void 0&&(Object.getPrototypeOf(r)===Object.prototype?{module_or_path:r}=r:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),r===void 0&&(r=new URL("postgrest_parser_bg.wasm",import.meta.url));let e=se();(typeof r=="string"||typeof Request=="function"&&r instanceof Request||typeof URL=="function"&&r instanceof URL)&&(r=fetch(r));let{instance:t,module:n}=await be(await r,e);return ge(t,n)}function Q(r){return{query:r.query,params:r.params,tables:r.tables}}function I(r){return r?JSON.stringify(r):void 0}function F(r){if(!r)return;let e=[];return r.return&&e.push(`return=${r.return}`),r.resolution&&e.push(`resolution=${r.resolution}`),r.missing&&e.push(`missing=${r.missing}`),r.count&&e.push(`count=${r.count}`),e.length>0?e.join(","):void 0}function q(r,e){let t=[];if(r)for(let[n,i]of Object.entries(r))t.push(`${n}=${i}`);if(e?.select){let n=Array.isArray(e.select)?e.select.join(","):e.select;t.push(`select=${n}`)}if(e?.order){let n=Array.isArray(e.order)?e.order.join(","):e.order;t.push(`order=${n}`)}if(e?.limit!==void 0&&t.push(`limit=${e.limit}`),e?.offset!==void 0&&t.push(`offset=${e.offset}`),e?.onConflict){let n=Array.isArray(e.onConflict)?e.onConflict.join(","):e.onConflict;t.push(`on_conflict=${n}`)}if(e?.returning){let n=Array.isArray(e.returning)?e.returning.join(","):e.returning;t.push(`returning=${n}`)}return t.join("&")}var J=class{parseRequest(e,t,n,i,o){let _=i?JSON.stringify(i):void 0,c=o?I(o):void 0,f=E(e,t,n,_,c);return Q(f)}select(e,t={}){let n=q(t.filters,t),i=t.count?{Prefer:`count=${t.count}`}:void 0,o=E("GET",e,n,void 0,I(i));return Q(o)}insert(e,t,n={}){let i=q(void 0,{onConflict:n.onConflict,returning:n.returning}),o=F(n.prefer),_=o?{Prefer:o}:void 0,c=Y(e,JSON.stringify(t),i||void 0,I(_));return Q(c)}upsert(e,t,n,i={}){let o={};for(let y of n)y in t&&(o[y]=`eq.${t[y]}`);let _=q(o,{returning:i.returning}),c=F(i.prefer),f=c?{Prefer:c}:void 0,w=E("PUT",e,_,JSON.stringify(t),I(f));return Q(w)}update(e,t,n,i={}){let o=q(n,{returning:i.returning}),_=F(i.prefer),c=_?{Prefer:_}:void 0,f=ee(e,JSON.stringify(t),o,I(c));return Q(f)}delete(e,t,n={}){let i=q(t,{returning:n.returning}),o=F(n.prefer),c=X(e,i,I(o?{Prefer:o}:void 0));return Q(c)}rpc(e,t={},n={}){let i=q(n.filters,n),o=Z(e,JSON.stringify(t),i||void 0,void 0);return Q(o)}parseOnly(e){return K(e)}buildFilterClause(e){return V(e)}};function te(){return new J}var B=class r{client;static initPromise=null;constructor(){this.client=te()}static async init(){r.initPromise||(r.initPromise=L()),await r.initPromise}static async initSchema(e){await r.init(),await W(e)}parseSelect(e,t=""){return this.parseRequest("GET",e,t)}parseInsert(e,t,n=""){return this.parseRequest("POST",e,n,t)}parseUpdate(e,t,n){return this.parseRequest("PATCH",e,n,t)}parseDelete(e,t){return this.parseRequest("DELETE",e,t)}parseRpc(e,t,n=""){let i=`rpc/${e}`;return this.parseRequest("POST",i,n,t)}parseRequest(e,t,n="",i){let o=this.client.parseRequest(e,t,n,i??null,null);return this.convertResult(o)}convertResult(e){return{sql:e.query,params:Array.isArray(e.params)?e.params:[],tables:Array.isArray(e.tables)?e.tables:[]}}};var M=class{db;parser;constructor(e,t){this.db=e,this.parser=t}from(e){return new G(this.db,this.parser,e)}async rpc(e,t){try{let n=this.parser.parseRpc(e,t);return{data:(await this.db.query(n.sql,[...n.params])).rows,error:null}}catch(n){return{data:null,error:n}}}},G=class{db;parser;table;selectColumns;filters=[];orderBy;limitCount;offsetCount;insertData;updateData;isDelete=!1;expectSingle=!1;expectMaybeSingle=!1;constructor(e,t,n){this.db=e,this.parser=t,this.table=n}select(e="*"){return this.selectColumns=e,this}insert(e){return this.insertData=e,this}update(e){return this.updateData=e,this}delete(){return this.isDelete=!0,this}eq(e,t){return this.filters.push(`${e}=eq.${String(t)}`),this}neq(e,t){return this.filters.push(`${e}=neq.${String(t)}`),this}gt(e,t){return this.filters.push(`${e}=gt.${String(t)}`),this}gte(e,t){return this.filters.push(`${e}=gte.${String(t)}`),this}lt(e,t){return this.filters.push(`${e}=lt.${String(t)}`),this}lte(e,t){return this.filters.push(`${e}=lte.${String(t)}`),this}like(e,t){return this.filters.push(`${e}=like.${t}`),this}ilike(e,t){return this.filters.push(`${e}=ilike.${t}`),this}in(e,t){let n=t.map(String).join(",");return this.filters.push(`${e}=in.(${n})`),this}is(e,t){let n=t===null?"null":t?"true":"false";return this.filters.push(`${e}=is.${n}`),this}order(e,t){let n=t?.ascending===!1?"desc":"asc",i=t?.nullsFirst?"nullsfirst":"nullslast";return this.orderBy=`${e}.${n}.${i}`,this}limit(e){return this.limitCount=e,this}range(e,t){return this.offsetCount=e,this.limitCount=t-e+1,this}single(){return this.expectSingle=!0,this.limitCount=1,this}maybeSingle(){return this.expectMaybeSingle=!0,this.limitCount=1,this}async then(e){let t=await this.execute();return e?e(t):t}async execute(){try{let e=this.buildQueryString(),t;if(this.insertData!==void 0){let o=Array.isArray(this.insertData)?this.insertData[0]??{}:this.insertData;t=this.parser.parseInsert(this.table,o,e)}else this.updateData!==void 0?t=this.parser.parseUpdate(this.table,this.updateData,e):this.isDelete?t=this.parser.parseDelete(this.table,e):t=this.parser.parseSelect(this.table,e);let n=await this.db.query(t.sql,[...t.params]);if(this.expectSingle&&n.rows.length===0)throw new Error("No rows returned");if(this.expectSingle&&n.rows.length>1)throw new Error("Multiple rows returned");return{data:this.expectSingle||this.expectMaybeSingle?n.rows[0]??null:n.rows,error:null}}catch(e){return{data:null,error:e}}}buildQueryString(){let e=[];return this.selectColumns&&e.push(`select=${this.selectColumns}`),e.push(...this.filters),this.orderBy&&e.push(`order=${this.orderBy}`),this.limitCount!==void 0&&e.push(`limit=${this.limitCount}`),this.offsetCount!==void 0&&e.push(`offset=${this.offsetCount}`),e.join("&")}};async function pe(r){await B.init(),await B.initSchema(async t=>({rows:(await r.query(t)).rows}));let e=new B;return new M(r,e)}export{B as PostgrestParser,M as SupabaseClient,pe as createSupabaseClient};
//# sourceMappingURL=slim.js.map
